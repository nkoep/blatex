% Copyright (c) 2015-2017 Niklas Koep
%
% This software may be modified and distributed under the terms of the MIT
% license. See the LICENSE file for details.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{blasymbols}[2015/03/18 v0.1]

\ProcessOptions\relax

\usepackage[nohyperlinks,nolist,printonlyused,withpage]{acronym}
\usepackage{tabularx}
\usepackage{import}

\renewcommand*{\aclabelfont}[1]{\acsfont{#1}}

\newtoks\@symboltokens
% Add a new symbol definition
\newcommand*{\addsymbol}[2]{
  \@symboltokens=\expandafter{\the\@symboltokens #1 & #2 \\}
}

% Generate the list of symbols
\newif\if@losdone\@losdonefalse
\newcommand*{\listofsymbols}{
  \if@losdone
    \PackageError{blasymbols}{Cannot generate the List of Symbols twice}{}
  \else
    \chapter{List of Symbols}
    \begin{tabularx}{\linewidth}{p{3em}X}
      \the\@symboltokens
    \end{tabularx}
    \@losdonetrue
  \fi
}

% TODO: Redefine the formatting of the \ac macro instead of introducing a new
%       one.
\newcommand*{\aci}[1]{\acfi{#1}\acused{#1}}
\newcommand*{\acli}[1]{\textit{\acl{#1}}}

\AtBeginDocument{%
  \begin{acronym}
    \import{../}{blacronyms}
  \end{acronym}%
}

\endinput
