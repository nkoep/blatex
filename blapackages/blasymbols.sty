% Copyright (c) 2015-2017 Niklas Koep
%
% This software may be modified and distributed under the terms of the MIT
% license. See the LICENSE file for details.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{blasymbols}[2015/03/18 v0.1]

\ProcessOptions\relax

\usepackage[
  toc,
  nopostdot,
  acronym,
  shortcuts,
  nohypertypes=acronym,
  nolist,
  xindy,
  nomain,
  indexonlyfirst
]{glossaries}
\usepackage{ltxtable}
\usepackage{import}

% Define glossary style similar to TOC.
\newglossarystyle{bla}{%
  \setglossarystyle{long}%
  \renewenvironment{theglossary}%
    {\tabularx{\linewidth}{@{}l@{\extracolsep{2em}}X@{}}}%
    {\endtabularx}%
}
% Define variant of dotfill macro with wider dot spacing.
\providecommand{\tocdotfill}[1]{%
  \leaders\hbox{$\m@th\mkern #1 mu\hbox{.}\mkern #1 mu$}\hfill%
}
\renewcommand*\glspostdescription{\tocdotfill{4.5}}
\setglossarystyle{bla}

\newtoks\@symboltokens
% Add a new symbol definition
\newcommand*{\addsymbol}[2]{
  \@symboltokens=\expandafter{\the\@symboltokens #1 & #2 \\}
}

% Generate the list of symbols
\newif\if@losdone\@losdonefalse
\newcommand*{\listofsymbols}{
  \if@losdone
    \PackageError{blasymbols}{Cannot generate the List of Symbols twice}{}
  \else
    \chapter{List of Symbols}
    \begin{tabularx}{\linewidth}{@{}l@{\extracolsep{2em}}X@{}}
      \the\@symboltokens
    \end{tabularx}
    \@losdonetrue
  \fi
}

\newcommand*{\acfi}[1]{\emph{\acl{#1}} (\acs{#1})}

\makeglossaries
\import{../}{blacronyms}

\endinput
