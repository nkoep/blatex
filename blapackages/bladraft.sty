% Copyright (c) 2015-2017 Niklas Koep
%
% This software may be modified and distributed under the terms of the MIT
% license. See the LICENSE file for details.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{bladraft}[2015/03/18 v0.1]

\usepackage[pagewise,switch*]{lineno}
\usepackage[excludeor]{everyhook}
\usepackage{marginnote}
\usepackage{todonotes}

\ProcessOptions\relax

\DeclareDocumentCommand{\@blanote}{m m o +m}{
  \ifblatex@draft%
    \tikzexternaldisable%
    \todo[inline,color=#1!40,size=\small,caption={}]{%
      \textbf{#2:~}\IfValueTF{#3}{\textit{#3} \\ #4}{#4}%
    }%
    \tikzexternalenable%
  \fi%
}

\DeclareDocumentCommand{\blatodo}{o +m}{%
  \@blanote{green}{TODO}[#1]{#2}%
}

\DeclareDocumentCommand{\blafixme}{o +m}{%
  \@blanote{red}{FIXME}[#1]{#2}%
}

\DeclareDocumentCommand{\blaxxx}{o +m}{%
  \@blanote{blue}{XXX}[#1]{#2}%
}

\endinput
